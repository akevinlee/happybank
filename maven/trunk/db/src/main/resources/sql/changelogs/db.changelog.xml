<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <changeSet id="1-1" author="klee">
        <comment>Create CUSTOMERS table</comment>
        <createTable tableName="CUSTOMERS">
            <column name="ID" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="TITLE" type="VARCHAR(3)">
                <constraints nullable="false"/>
            </column>
            <column name="FIRSTNAME" type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="LASTNAME" type="VARCHAR(30)">
                <constraints nullable="false"/>
            </column>
            <column name="USERID" type="VARCHAR(20)"/>
            <column name="PASSWORD" type="VARCHAR(30)"/>
        </createTable>
    </changeSet>
    <changeSet id="1-2" author="klee">
        <comment>Create primary key for ID on CUSTOMER</comment>
        <addPrimaryKey columnNames="ID" constraintName="PK_CUSTOMER_ID"
            tableName="CUSTOMERS"/>
    </changeSet>
    <changeSet id="1-3" author="klee">
        <comment>Create index for USERID on CUSTOMERS</comment>
        <createIndex indexName="IDX_CUSTOMER_USERID" tableName="CUSTOMERS">
            <column name="USERID"/>
        </createIndex>
    </changeSet>
    <changeSet id="2-1" author="klee">
        <comment>Create ACCOUNTS table</comment>
        <createTable tableName="ACCOUNTS">
            <column name="ID" type="CHAR(8)">
                <constraints nullable="false"/>
            </column>
            <column name="BALANCE" type="CURRENCY" defaultValueNumeric="0.0"/>
            <column name="INTEREST" type="DECIMAL" defaultValueNumeric="0.0"/>
            <column name="ACCTYPE" type="VARCHAR(8)" defaultValue="CURRENT"/>
            <column name="DISCRIMINATOR" type="CHAR(1)" defaultValue="C"/>
            <column name="OVERDRAFT" type="CURRENCY" defaultValueNumeric="0.0"/>
            <column name="MINAMOUNT" type="CURRENCY" defaultValueNumeric="0.0"/>
        </createTable>
    </changeSet>
    <changeSet id="2-2" author="klee">
        <comment>Create primary key for ID on ACCOUNTS</comment>
        <addPrimaryKey columnNames="ID" constraintName="PK_ACCOUNT_ID"
            tableName="ACCOUNTS"/>
    </changeSet>
    <changeSet id="3-1" author="klee">
        <comment>Create TRANSRECORDS table</comment>
        <createTable tableName="TRANSRECORDS">
            <column name="ID" type="INTEGER">
                <constraints autoIncrement="true" nullable="false"/>
            </column>
            <column name="ACCID" type="CHAR(8)">
                <constraints nullable="false"/>
            </column>
            <column name="TRANSDATE" type="TIMESTAMP"/>
            <column name="TRANSTYPE" type="CHAR(1)" defaultValue="C"/>
            <column name="TRANSAMT" type="CURRENCY" defaultValue="0.0"/>
        </createTable>
    </changeSet>
    <changeSet id="3-2" author="klee">
        <comment>Create primary key for TRANSID on TRANSRECORDS</comment>
        <addPrimaryKey columnNames="ID" constraintName="PK_TRANSRECORDS_ID"
            tableName="TRANSRECORDS"/>
    </changeSet>
    <changeSet id="3-3" author="klee">
        <comment>Create foreign key for ACCID on TRANSRECORDS</comment>
        <addForeignKeyConstraint baseColumnNames="ACCID"
            baseTableName="TRANSRECORDS" constraintName="FK_TRANSRECORDS_ID"
            referencedColumnNames="ID" referencedTableName="ACCOUNTS"/>
    </changeSet>
    <changeSet id="4-1" author="klee">
        <comment>Create CUSTACCTS table</comment>
        <createTable tableName="CUSTACCTS">
            <column name="CUSTOMERID" type="INTEGER">
                <constraints nullable="false"/>
            </column>
            <column name="ACCID" type="CHAR(8)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="4-2" author="klee">
        <comment>Create primary key for CUSTOMERID and ACCID on CUSTACCTS</comment>
        <addPrimaryKey columnNames="CUSTOMERID,ACCID" constraintName="PK_CUSTACCT"
            tableName="CUSTACCTS"/>
    </changeSet>
    <changeSet id="4-3" author="klee">
        <comment>Create foreign key for CUSTOMERID on CUSTACCTS</comment>
        <addForeignKeyConstraint baseColumnNames="CUSTOMERID"
            baseTableName="CUSTACCTS" constraintName="FK_CUSTACCTS_ID"
            referencedColumnNames="ID" referencedTableName="CUSTOMERS"
            deleteCascade="true"/>
    </changeSet>
    <changeSet id="4-4" author="klee">
        <comment>Create foreign key for ACCID on CUSTACCTS</comment>
        <addForeignKeyConstraint baseColumnNames="ACCID"
            baseTableName="CUSTACCTS" constraintName="FK_CUSTACCTS_ACCID"
            referencedColumnNames="ID" referencedTableName="ACCOUNTS"
            deleteCascade="true"/>
    </changeSet>
</databaseChangeLog>